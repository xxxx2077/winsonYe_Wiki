# 分布式系统与微服务

## 为什么需要服务注册与发现

没有服务注册与发现，某服务需要将其所依赖的其他服务的地址信息写死在配置文件

当这个服务发生扩容或者宕机，需要向其他服务更新地址配置信息，这个过程需要是手动的。

有了服务注册与发现，引入了注册中心，注册中心负责维护可用服务的列表，通过注册中心获取可用服务的地址。

如果服务信息发生变更，注册中心会把变更推送给相关联的服务，更新服务地址信息，无需手动更新。

服务中心作用不仅于此，作用共有：
1. 服务注册与服务发现
2. 服务状态变更通知、服务健康检查、不可用服务剔除
3. 服务权重配置（权重越高被访问的频率越高）

## 服务注册与服务发现的基本流程

服务注册：每个服务节点启动的时候，会向注册中心注册服务，把自己的地址信息（ip、端口、服务名字等）上报给注册中心

服务发现：一个服务节点要调用另外一个服务节点，就会拿着服务的信息（比如说名字）找注册中心要对方的地址信息。通常服务节点拿到地址信息之后，还会在本地缓存一份，保证注册中心宕机的时候仍然可以正常调用服务。

## 为什么注册中心使用consul

CP模型，保证强一致性（Raft）；Leader选举期间不可用

功能齐全，“一站式”，不需要依赖zookeeper

部署简单，安装包只有一个可执行文件，使用docker部署方便

提供web管理界面



